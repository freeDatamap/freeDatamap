!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b=b.d3||(b.d3={}),b=b.layout||(b.layout={}),b.cloud=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){return a.text}function e(){return"serif"}function f(){return"normal"}function g(a){return Math.sqrt(a.value)}function h(){return 30*(~~(6*Math.random())-3)}function i(){return 1}function j(a,b,c,d){if(!b.sprite){var e=a.context,f=a.ratio;e.clearRect(0,0,(u<<5)/f,v/f);var g=0,h=0,i=0,j=c.length;for(--d;++d<j;){b=c[d],e.save(),e.font=b.style+" "+b.weight+" "+~~((b.size+1)/f)+"px "+b.font;var k=e.measureText(b.text+"m").width*f,l=b.size<<1;if(b.rotate){var m=Math.sin(b.rotate*t),n=Math.cos(b.rotate*t),o=k*n,p=k*m,q=l*n,r=l*m;k=Math.max(Math.abs(o+r),Math.abs(o-r))+31>>5<<5,l=~~Math.max(Math.abs(p+q),Math.abs(p-q))}else k=k+31>>5<<5;if(l>i&&(i=l),g+k>=u<<5&&(g=0,h+=i,i=0),h+l>=v)break;e.translate((g+(k>>1))/f,(h+(l>>1))/f),b.rotate&&e.rotate(b.rotate*t),e.fillText(b.text,0,0),b.padding&&(e.lineWidth=2*b.padding,e.strokeText(b.text,0,0)),e.restore(),b.width=k,b.height=l,b.xoff=g,b.yoff=h,b.x1=k>>1,b.y1=l>>1,b.x0=-b.x1,b.y0=-b.y1,b.hasText=!0,g+=k}for(var s=e.getImageData(0,0,(u<<5)/f,v/f).data,w=[];--d>=0;)if(b=c[d],b.hasText){for(var k=b.width,x=k>>5,l=b.y1-b.y0,y=0;l*x>y;y++)w[y]=0;if(g=b.xoff,null==g)return;h=b.yoff;for(var z=0,A=-1,B=0;l>B;B++){for(var y=0;k>y;y++){var C=x*B+(y>>5),D=s[(h+B)*(u<<5)+(g+y)<<2]?1<<31-y%32:0;w[C]|=D,z|=D}z?A=B:(b.y0++,l--,B--,h++)}b.y1=b.y0+A,b.sprite=w.slice(0,(b.y1-b.y0)*x)}}}function k(a,b,c){c>>=5;for(var d,e=a.sprite,f=a.width>>5,g=a.x-(f<<4),h=127&g,i=32-h,j=a.y1-a.y0,k=(a.y+a.y0)*c+(g>>5),l=0;j>l;l++){d=0;for(var m=0;f>=m;m++)if((d<<i|(f>m?(d=e[l*f+m])>>>h:0))&b[k+m])return!0;k+=c}return!1}function l(a,b){var c=a[0],d=a[1];b.x+b.x0<c.x&&(c.x=b.x+b.x0),b.y+b.y0<c.y&&(c.y=b.y+b.y0),b.x+b.x1>d.x&&(d.x=b.x+b.x1),b.y+b.y1>d.y&&(d.y=b.y+b.y1)}function m(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function n(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function o(a){var b=4,c=b*a[0]/a[1],d=0,e=0;return function(a){var f=0>a?-1:1;switch(Math.sqrt(1+4*f*a)-f&3){case 0:d+=c;break;case 1:e+=b;break;case 2:d-=c;break;default:e-=b}return[d,e]}}function p(a){for(var b=[],c=-1;++c<a;)b[c]=0;return b}function q(){return document.createElement("canvas")}function r(a){return"function"==typeof a?a:function(){return a}}var s=a("d3-dispatch").dispatch,t=Math.PI/180,u=64,v=2048;b.exports=function(){function a(a){a.width=a.height=1;var b=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2);a.width=(u<<5)/b,a.height=v/b;var c=a.getContext("2d");return c.fillStyle=c.strokeStyle="red",c.textAlign="center",{context:c,ratio:b}}function b(a,b,d){for(var e,f,g,h=([{x:0,y:0},{x:c[0],y:c[1]}],b.x),i=b.y,j=Math.sqrt(c[0]*c[0]+c[1]*c[1]),l=C(c),n=H()<.5?1:-1,o=-n;Date.now()-K<E&&(e=l(o+=n))&&(f=~~e[0],g=~~e[1],!(Math.min(Math.abs(f),Math.abs(g))>=j));)if(b.x=h+f,b.y=i+g,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>c[0]||b.y+b.y1>c[1])&&(!d||!k(b,a,c[0]))&&(!d||m(b,d))){for(var p,q=b.sprite,r=b.width>>5,s=c[0]>>5,t=b.x-(r<<4),u=127&t,v=32-u,w=b.y1-b.y0,x=(b.y+b.y0)*s+(t>>5),y=0;w>y;y++){p=0;for(var z=0;r>=z;z++)a[x+z]|=p<<v|(r>z?(p=q[y*r+z])>>>u:0);x+=s}return delete b.sprite,!0}return!1}var c=[256,256],o=d,t=e,x=g,y=f,z=f,A=h,B=i,C=n,D=[],E=1e3,F=s("word","end"),G=null,H=Math.random,I={},J=q,K=Date.now();return I.canvas=function(a){return arguments.length?(J=r(a),I):J},I.start=function(){function d(){for(;++i<h&&G;){var a=m[i];a.x=c[0]*(H()+.5)>>1,a.y=c[1]*(H()+.5)>>1,j(e,a,m,i),a.hasText&&b(f,a,g)&&(k.push(a),F.word(a),g?l(g,a):g=[{x:a.x+a.x0,y:a.y+a.y0},{x:a.x+a.x1,y:a.y+a.y1}],a.x-=c[0]>>1,a.y-=c[1]>>1),n=Date.now()-K,n>E&&(i=h)}i>=h&&(I.stop(),F.end(k,g))}var e=a(J()),f=p((c[0]>>5)*c[1]),g=null,h=D.length,i=-1,k=[],m=D.map(function(a,b){return a.text=o.call(this,a,b),a.font=t.call(this,a,b),a.style=y.call(this,a,b),a.weight=z.call(this,a,b),a.rotate=A.call(this,a,b),a.size=~~x.call(this,a,b),a.padding=B.call(this,a,b),a}).sort(function(a,b){return b.size-a.size}),n=0;return G&&clearInterval(G),G=setInterval(d,0),d(),I},I.stop=function(){return G&&(clearInterval(G),G=null),I},I.timeInterval=function(a){return arguments.length?(E=null==a?1/0:a,I):E},I.words=function(a){return arguments.length?(D=a,I):D},I.size=function(a){return arguments.length?(c=[+a[0],+a[1]],I):c},I.font=function(a){return arguments.length?(t=r(a),I):t},I.fontStyle=function(a){return arguments.length?(y=r(a),I):y},I.fontWeight=function(a){return arguments.length?(z=r(a),I):z},I.rotate=function(a){return arguments.length?(A=r(a),I):A},I.text=function(a){return arguments.length?(o=r(a),I):o},I.spiral=function(a){return arguments.length?(C=w[a]||a,I):C},I.fontSize=function(a){return arguments.length?(x=r(a),I):x},I.padding=function(a){return arguments.length?(B=r(a),I):B},I.random=function(a){return arguments.length?(H=a,I):H},I.on=function(){var a=F.on.apply(F,arguments);return a===F?I:a},I};var w={archimedean:n,rectangular:o}},{"d3-dispatch":2}],2:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.dispatch={})}(this,function(a){"use strict";function b(a){function b(a){var b=(a+="").indexOf("."),c=a;if(b>=0?a=a.slice(0,b):c+=".",a&&!g.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}}function c(a){return function(){for(var b,c,d=g[a],e=-1,f=d.length;++e<f;)(c=(b=d[e]).value)&&c.apply(this,arguments);return i}}var d,e=-1,f=a.length,g={},h={},i=this;for(i.on=function(a,c){if(a=b(a),arguments.length<2)return(c=h[a.name])&&c.value;if(a.type){var d,e=g[a.type],f=h[a.name];f&&(f.value=null,d=e.indexOf(f),g[a.type]=e=e.slice(0,d).concat(e.slice(d+1)),delete h[a.name]),c&&(c={value:c},h[a.name]=c,e.push(c))}else if(null==c)for(var j in g)if(c=h[j+a.name]){c.value=null;var e=g[j],d=e.indexOf(c);g[j]=e.slice(0,d).concat(e.slice(d+1)),delete h[c.name]}return i};++e<f;){if(d=a[e]+"",!d||d in i)throw new Error("illegal or duplicate type: "+d);g[d]=[],i[d]=c(d)}}function c(){return new b(arguments)}c.prototype=b.prototype,a.dispatch=c})},{}]},{},[1])(1)});